<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.0.20 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC0791 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0791.xml">
<!ENTITY RFC2460 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2460.xml">
<!ENTITY RFC0768 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0768.xml">
<!ENTITY RFC0793 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0793.xml">
<!ENTITY RFC0896 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0896.xml">
<!ENTITY RFC1122 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.1122.xml">
<!ENTITY RFC2018 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2018.xml">
<!ENTITY RFC3168 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3168.xml">
<!ENTITY RFC3390 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3390.xml">
<!ENTITY RFC4340 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4340.xml">
<!ENTITY RFC4960 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4960.xml">
<!ENTITY RFC5348 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5348.xml">
<!ENTITY RFC5405 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5405.xml">
<!ENTITY RFC5925 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5925.xml">
<!ENTITY RFC5681 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5681.xml">
<!ENTITY RFC6093 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6093.xml">
<!ENTITY RFC6298 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6298.xml">
<!ENTITY RFC6691 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6691.xml">
<!ENTITY RFC7323 SYSTEM "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7323.xml">
]>

<rfc ipr="trust200902" docName="draft-ietf-taps-transports-00" category="info">


  <front>
    <title abbrev="TAPS Transports">Services provided by IETF transport protocols and congestion control mechanisms</title>

    <author initials="G." surname="Fairhurst" fullname="Godred Fairhurst" role="editor">
      <organization>University of Aberdeen</organization>
      <address>
        <postal>
          <street>School of Engineering, Fraser Noble Building</street>
          <city>Aberdeen AB24 3UE</city>
        </postal>
        <email>gorry@erg.abdn.ac.uk</email>
      </address>
    </author>
    <author initials="B." surname="Trammell" fullname="Brian Trammell" role="editor">
      <organization>ETH Zurich</organization>
      <address>
        <postal>
          <street>Gloriastrasse 35</street>
          <city>8092 Zurich</city>
          <country>Switzerland</country>
        </postal>
        <email>ietf@trammell.ch</email>
      </address>
    </author>
    <author initials="M." surname="Kuehlewind" fullname="Mirja Kuehlewind" role="editor">
      <organization>ETH Zurich</organization>
      <address>
        <postal>
          <street>Gloriastrasse 35</street>
          <city>8092 Zurich</city>
          <country>Switzerland</country>
        </postal>
        <email>mirja.kuehlewind@tik.ee.ethz.ch</email>
      </address>
    </author>

    <date year="2014" month="December" day="19"/>

    
    
    

    <abstract>


<t>This document describes services provided by existing IETF protocols and congestion control mechanisms.  It is designed to help application and network stack programmers and to inform the work of the IETF TAPS Working Group.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Most Internet applications make use of the Transport Services provided by TCP (a reliable, in-order stream protocol) or UDP (an unreliable datagram protocol). We use the term “Transport Service” to mean the end-to-end service provided to an application by the transport layer. That service can only be provided correctly if information is supplied from the application. The application may determine the information to be supplied at design time, compile time, or run time, and may include guidance on whether some feature is required, a preference by the application, or something in between. Examples of features of Transport Services are reliable delivery, ordered delivery, content privacy to in-path devices, integrity protection, and minimal latency.</t>

<t>The IETF has defined a wide variety of transport protocols beyond TCP and UDP, such as TCP, SCTP, DCCP, MP-TCP, and UDP-Lite. Transport services may be provided directly by these transport protocols, or layered on top of them using protocols such as WebSockets (which runs over TCP) or RTP (over TCP or UDP). Services built on top of UDP or UDP-Lite typically also need to specify a congestion control mechanism, such as TFRC or the LEDBAT congestion control mechanism.  This extends the set of available Transport Services beyond those provided to applications by TCP and UDP.</t>

<t>Transport protocols can aslo be differentiated by the features of the services they provide: for instance, SCTP offers a message-based service that does not suffer head-of-line blocking when used with multiple stream, because it can accept blocks of data out of order, UDP-Lite provides partial integrity protection when used over link-layer services that can support this, and LEDBAT can provide low-priority “scavenger” communication.</t>

</section>
<section anchor="terminology" title="Terminology">

<t>The following terms are defined throughout this document, and in subsequent documents produced by TAPS describing the composition and decomposition of transport services.</t>

<t>The terminology below is that as was presented at the TAPS WG meeting in Honolulu. While the factoring of the terminology seems uncontroversial, thre may be some entities which still require names (e.g. information about the interface between the transport and lower layers which could lead to the availablity or unavailibility of certain transport protocol features)</t>

<t>Transport Service Feature: 
:a specific feature a transport service provides to its clients end-to-end. Examples include confidentiality, reliable delivery, ordered delivery, message-versus-stream orientation, etc.</t>

<t>Transport Service: 
:a set of transport service features, without an association to any given framing protocol, which provides a complete service to an application.</t>

<t>Transport Protocol: 
:an implementation that provides one or more different transport services using a specific framing and header format on the wire.</t>

<t>Transport Protocol Component: 
:an implementation of a transport service feature within a protocol</t>

<t>Transport Service Instance: 
:an arrangement of transport protocols with a selected set of features and configuration parameters that implements a single transport service, 
e.g. a protocol stack (RTP over UDP)</t>

<t>Application: 
:an entity that uses the transport layer for end-to-end delivery data across the network.</t>

</section>
<section anchor="existing-transport-protocols" title="Existing Transport Protocols">

<t>This section enumerates existing transport protocols </t>

<section anchor="template-imaginary-transport-protocol-itp" title="Template: Imaginary Transport Protocol (ITP)">

<t>(This subsection is a initial rough template to provide guidance to subsection authors on how a subsection should be structured and what information should be provided. Please don’t use it yet, but do think about whether it applies to the protocol section you’re writing, and if not, why not. It will be removed once a real transport protocol has been fully described in the draft; that protocol’s description can then be used as template for the others. In general, guidance for writing a transport protocol session is that the description should be short, with enough detail to compare and contrast protocols and extract relevant transport service features, but not necessarily enough detail to implement the protocol or understand corner-cases its design. Implementation details and corner cases, if mentioned, should be further explained by reference.)</t>

<section anchor="introduction-and-applicability" title="Introduction and Applicability">

<t>(This subsection should be at most three paragraphs: what’s the protocol called, where can one read about it, what does it do, where is it deployed, and what applications is it used for.)</t>

<t>The Imaginary Transport Protocol (ITP) [reference] provides a unidirectional, connectionless, message-oriented, partially-reliable transport for fixed-sized messages over IP, using protocol number 257. It is intended primarily for use in bidirectional constant-bit-rate (CBR) unicast media transmission. It is not widely implemented within the Internet, as I just made it up, and it has several fatal design flaws, including requiring an illegal protocol number for its operation.</t>

</section>
<section anchor="core-features" title="Core Features">

<t>(This subsection should describe each base feature of the base protocol which may be interesting for decomposing the service(s) it provides. Base features are those which require no (1) optional API interactions in normal usage or (2) additional headers on the wire. Dividing descriptions of features into subsections is desirable but optional, snce these features may depend on each other. Each feature should be covered by about two paragraphs.)</t>

<t>ITP’s features include time- and retransmission-limited partial reliability and constant-sized message-oriented framing. All ITP messages are 392 octets long, with 8 octets of header and 384 octets of payload. Each message has a message sequence number; ITP acknowledgment messages are 16 octets long. Each message will be retransmitted up to two times (for three total transmissions) if not acknowledged, or if not acknowledged within an application-defined time. Further details of ITP’s acknowledgment and message sequence number management scheme are found in [reference].</t>

<t>ITP provides no additional congestion control features. </t>

</section>
<section anchor="optional-features" title="Optional Features">

<t>(This subsection should describe each optional feature of the protocol which may be interesting for decomposing the service(s) it provides, as above.)</t>

<t>ITP’s retransmission can be optionally completely disabled at the sender-side, though the receiver will continue to send acknowledgments. This optional operation mode has no other effect on the protocol on the wire.</t>

</section>
<section anchor="application-interface-considerations" title="Application Interface Considerations">

<t>(This subsection should describe features the protocol requires of the API. How is the protocol, along with its optional features, normally used by the application? Does it use the sockets API; if so, are there socket options?)</t>

<t>ITP can be used via the sockets interface on systems which support it, by using the SOCK_IMAGINARY socket type. Regardless of the size of the buffer passed to sendmsg(2), the message will be truncated or zero-padded to 384 octets in the ITP message, and recvmsg(2) always returns 384 bytes.</t>

<t>No information about the ack stream is available; retransmission can be optionally disabled via setsockopt(2).</t>

</section>
<section anchor="interactions-with-other-protocols" title="Interactions with other protocols">

<t>(If the protocol uses other protocols to provide additional service components – commonly, this would include (D)TLS encapsulation – that should be noted here)</t>

<t>ITP can be encapsulated within DTLS to provide confidentiality, integrity, and authentication, as described in [reference].</t>

</section>
<section anchor="candidate-components" title="Candidate Components">

<t>(This subsection should list candidate components derived from the features above.)</t>

<t><list style="symbols">
  <t>Time- and retransmission-limited reliability</t>
  <t>Unidirectional transmission</t>
  <t>Fixed-length message-oriented transmission</t>
</list></t>

</section>
</section>
<section anchor="transmission-control-protocol-tcp" title="Transmission Control Protocol (TCP)">

<t>(Volunteer: Mirja Kuehlewind)</t>

<t>TCP is a stream-oriented transport protocol that is widely used in the Internet.
In constrast to UDP, TCP provides reliability… </t>

<t>“The Transmission Control Protocol (TCP) is intended for use as a highly
reliable host-to-host protocol between hosts in packet-switched computer
communication networks, and in interconnected systems of such networks.” <xref target="RFC0793"/></t>

<t>(Some more text here)</t>

<section anchor="detailed-description-of-protocol-mechanisms" title="Detailed Description of Protocol Mechanisms">

<t>(we only talk about the mechanism here and not about the framing… is this right?)</t>

<t>(subsection headings of this section might be different for each protocol…?)</t>

<section anchor="connection-establishment-and-clearing" title="Connection Establishment and Clearing">

<t>(text on TCP handshake goes here)</t>

<t>(text on the role of port numbers goes here)</t>

</section>
</section>
<section anchor="data-communication" title="Data Communication">

<t>TCP partitions all data into segements that can be identified by a sequence number (SEQ).
Each new payload byte increases the SEQ by one. 
The Maximum Segment Size (MSS) <xref target="RFC6691"/> is determined by the capacilities of the lower layer, usually IP, and the length of the TCP header as well as TCP options.
A TCP receiver sends an acknowledgment (ACK) on the reception of a data segment.
The ACK contains an acknowledgment number that announces the next in-order SEQ expected by the receiver. 
To reduce signaling overhead, a TCP receiver might not acknowledge each received segment separately but multiple at once. 
A TCP receiver should at least acknowledge every second packet and delay an acknowledgement not more that 500ms <xref target="RFC1122"/> <xref target="RFC5681"/>. 
<!-- Most operating systems implement a maximum delay of 100ms today. There are hardware implementation for high speed networks that accumulate even more. -->
Loss is assumed by the sender if three duplicated ACKs, that acknowledge the same SEQ, are received or no ACK is received for a certain time and the Retransmission Time-Out (RTO) triggers an interupt.
If a seqment is detected to be lost, the sender will retransmit it.
<!-- and retransmitting (potentially) lost data when no new acknowledgment is received. -->
Duplicated ACKs are triggered at the receiver by the arrival of out-of-order data segments and thereby do not acknowledge new data but repeat the previous acknowledgment number.<vspace />
<!-- If this data does not carry the next expected SEQ, the receiver will send out an ACK with the same acknowledgment number again. 
This is called a duplicated ACK. --> 
When the missing data is received, a cumulative acknowledgment is sent that acknowledges all (now) in-order segments received so far.
Additionally, TCP often implements Selective Acknowledgment (SACK) <xref target="RFC2018"/>, where, in case of duplicated ACKs, the received sequence number ranges are announced to the sender.
Therefore when more than one packets got lost, the sender does not have to wait until an accumulated ACK announces the next whole in the sequence number space, but can retransmit lost packets immediately.</t>

<t>To determine e.g. a large enough value for the RTO <xref target="RFC6298"/>, the  RTT needs to be measured by a TCP sender.
The RTTM mechanism in TCP either needs to store the sent-out time stamp and SEQ of all or a sample of packets or can use the TSOpt <xref target="RFC7323"/>. 
With TSOpt the sender adds the current time stamp to each packet and the receiver reflects this time stamp in the respective ACK. 
By subtracting the reflected time stamp from the current system time the  RTT can be measured for each received ACK holding a valid TSOpt.
<!-- Note, that in case of delayed or duplicated ACKs, the time stamp of the first unacknowledged packet is reflected which might inflate the  RTT measurement artificially but guarantees a large enough RTO. -->
<!--"Then a single subtract gives the sender an accurate RTT measurement for every ACK segment (which will correspond to every other data segment, with a sensible receiver)." [rfc7323]--></t>

<t>(talk about spurious retransmissions…?)</t>

<t>Further when a loss is detected,  TCP congestion control <xref target="RFC5681"/> becomes active and usually reduces the sending rate.
The sending rate is most often determined by a (sliding-) window. 
Based on the packet conservation principle [Jacobson1988], new packets are only sent into the network when an old packets has exited. 
This leads to TCP implementations that are mostly self-clocked and take actions only when an ACK is received.
Initially, if enough data is available, a TCP sender usually send 2-4 <xref target="RFC3390"/> or up to 10 segements back to back.
When no ACKs are received at all for a certain time larger than at least one  RTT, the RTO is triggered and the sending rate is reduced to a minimum value.
The current sending window is the minimum of the receive window and the congestion window where 
the receive window is announced by the receiver to not overload the receiver buffer.
As long as flow control does not become active and not signal a smaller receive window to not overload the receiver, the sending window equals the congestion window.
The congestion window is estimated by the congestion control algorithm based on implicit or explicit network feedback such as loss, delay measurements, or Explicit Congestion Notofication (ECN) <xref target="RFC3168"/>.
<!--In general, congestion control is based on some kind of network feedback.-->
<!-- Inherently, the congestion control mechanism of a TPC sender assumes that loss occurs to due network congestion und therefore reacts each time congestion is notified.
Note, congestion control usually at most reduces once per RTT as the congestion feedback has a signaling delay of one RTT. 
Unfortunately, congestion is not the only reason for the occurrence of loss. 
Packets can be dropped for various reasons by different nodes on the network path, e.g due to bit errors.-->
<!--In the Internet the non-congestion based loss rate is usually very low, thus it is common sense to always handle loss as congestion signal.--></t>

<t>(text on “On the Implementation of the TCP Urgent Mechanism” <xref target="RFC6093"/>, “The TCP Authentication Option” <xref target="RFC5925"/>, and “TCP Fast Open”…?)</t>

<t>(What’s still missing? Check TCP options…)</t>

</section>
<section anchor="interfaces" title="Interfaces">

<t>(describe socket interface)</t>

</section>
<section anchor="candidate-components-1" title="Candidate Components">

<t>Reliability, congestion control, connection-oriented, unicast…?</t>

</section>
</section>
<section anchor="user-datagram-protocol" title="User Datagram Protocol">

<t>(Volunteer: Kevin Fall)</t>

</section>
<section anchor="realtime-transport-protocol" title="Realtime Transport Protocol">

<t>(Volunteer: Varun Singh)</t>

</section>
<section anchor="stream-control-transmission-protocol" title="Stream Control Transmission Protocol">

<t>(Volunteers: Michael Tuexen, Karen Nielsen)</t>

</section>
</section>
<section anchor="transport-service-features" title="Transport Service Features">

<t>(drawn from the candidate features provided by protocol components in the previous section)</t>

</section>
<section anchor="complete-protocol-feature-matrix" title="Complete Protocol Feature Matrix">

<t>(a comprehensive matrix table goes here; Volunteer: Dave Thaler)</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>This document has no considerations for IANA.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>This document surveys existing transport protocols and protocols providing transport-like services. Confidentiality, integrity, and authenticity are among the features provided by those services. This document does not specify any new components or mechanisms for providing these features.</t>

</section>
<section anchor="contributors" title="Contributors">

<t>Non-editor contributors of text will be listed here, as in the authors section.</t>

</section>
<section anchor="acknowledgments" title="Acknowledgments">

<t>This work is partially supported by the European Commission under grant agreement FP7-ICT-318627 mPlane; support does not imply endorsement.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>

&RFC0791;
&RFC2460;


    </references>

    <references title='Informative References'>

&RFC0768;
&RFC0793;
&RFC0896;
&RFC1122;
&RFC2018;
&RFC3168;
&RFC3390;
&RFC4340;
&RFC4960;
&RFC5348;
&RFC5405;
&RFC5925;
&RFC5681;
&RFC6093;
&RFC6298;
&RFC6691;
&RFC7323;


    </references>



  </back>
</rfc>

